

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Introduction to Numpy &#8212; Practice and theory of brain imaging</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'numpy_intro';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Boolean arrays" href="boolean_arrays.html" />
    <link rel="prev" title="What is an image?" href="what_is_an_image.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/reggie.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/reggie-inv.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">The neuroimaging problem</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="the_problem.html">The problem and the plan</a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The tools</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="to_code.html">Ode to code</a></li>
<li class="toctree-l1"><a class="reference internal" href="surviving_computers.html">Surviving the computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="the_software.html">Our tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_jupyter.html">Using Jupyter notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="more_on_jupyter.html">More on the Jupyter notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="brisk_python.html">Brisk introduction to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing on your computer</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Images and code and images</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pathlib.html">Using the <code class="docutils literal notranslate"><span class="pre">pathlib</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_is_an_image.html">What is an image?</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Introduction to Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="boolean_arrays.html">Boolean arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshape_and_2d.html">Two-dimensions, reshaping</a></li>
<li class="toctree-l1"><a class="reference internal" href="arrays_and_images.html">Arrays as images, images as arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="arrays_3d.html">Three-dimensional arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="images_3d.html">Three-dimensional images, NIfTI</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshape_and_3d.html">Reshaping and three-dimensional arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="boolean_indexing.html">Indexing with Boolean arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="boolean_indexing_nd.html">Boolean indexing with more than one dimension</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_to_4d.html">Working with four dimensional images, masks and functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshape_and_4d.html">Reshaping, 4D to 2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="voxels_by_time.html">Voxels and time</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Working reproducibly</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="on_modules.html">Modules and scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="sys_path.html">Where does Python look for modules?</a></li>
<li class="toctree-l1"><a class="reference internal" href="assert.html">Using <code class="docutils literal notranslate"><span class="pre">assert</span></code> for testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_style.html">Python coding style</a></li>
<li class="toctree-l1"><a class="reference internal" href="docstrings.html">Docstrings</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_directories.html">Module directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="on_testing.html">On testing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Detecting activation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="voxel_time_courses.html">Correlating with voxel time courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="on_convolution.html">Convolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="convolution_background.html">Convolving with the hemodyamic response function</a></li>
<li class="toctree-l1"><a class="reference internal" href="on_regression.html">Introducing regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="regress_one_voxel.html">Regression for a single voxel</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression_notation.html">Notation for regression models</a></li>
<li class="toctree-l1"><a class="reference internal" href="glm_intro.html">Introduction to the general linear model</a></li>
<li class="toctree-l1"><a class="reference internal" href="mean_test_example.html">A worked example of the general linear model</a></li>

<li class="toctree-l1"><a class="reference internal" href="model_one_voxel.html">Modeling a single voxel</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_multiply.html">Estimation for many voxels at the same time</a></li>
<li class="toctree-l1"><a class="reference internal" href="hypothesis_tests.html">Hypothesis testing with the general linear model</a></li>


<li class="toctree-l1"><a class="reference internal" href="test_one_voxel.html">Testing a single voxel</a></li>

<li class="toctree-l1"><a class="reference internal" href="non_tr_onsets.html">Using onsets that do not start on a TR</a></li>
<li class="toctree-l1"><a class="reference internal" href="whole_image_statistics.html">Whole-brain t tests and p values</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonferroni_correction.html">Notes on the Bonferroni threshold</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Spatial processing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="slice_timing.html">Slice timing correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimizing_space.html">Calculating transformations between images</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagonal_zooms.html">Encoding zooms (scaling) with a diagonal matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="nibabel_affines.html">The <code class="docutils literal notranslate"><span class="pre">nibabel.affines</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="nibabel_apply_affine.html">Applying coordinate transforms with <code class="docutils literal notranslate"><span class="pre">nibabel.affines.apply_affine</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="map_coordinates.html">General resampling between images with <code class="docutils literal notranslate"><span class="pre">scipy.ndimage.map_coordinates</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="image_header_and_affine.html">The image header and affine</a></li>

<li class="toctree-l1"><a class="reference internal" href="images_and_affines.html">Images and affines</a></li>
<li class="toctree-l1"><a class="reference internal" href="rotation_2d_3d.html">Rotations and rotation matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="resampling_with_ndimage.html">Resampling with <code class="docutils literal notranslate"><span class="pre">scipy.ndimage</span></code></a></li>

<li class="toctree-l1"><a class="reference internal" href="dipy_registration.html">Registration with dipy</a></li>

<li class="toctree-l1"><a class="reference internal" href="anterior_cingulate.html">Anterior cingulate</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Notes on arrays and plots</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="methods_vs_functions.html">Methods vs functions in NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="allclose.html">Testing for near equality with “allclose”</a></li>
<li class="toctree-l1"><a class="reference internal" href="arange.html">NumPy arange</a></li>
<li class="toctree-l1"><a class="reference internal" href="numpy_logical.html">Logical operations on Boolean arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="dot_outer.html">Vector and matrix dot products, “np.outer”</a></li>
<li class="toctree-l1"><a class="reference internal" href="newaxis.html">Adding length 1 dimensions with newaxis</a></li>
<li class="toctree-l1"><a class="reference internal" href="array_reductions.html">Array reduction operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="numpy_random.html">Numpy random number generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtract_means.html">Subtracting the mean from columns or rows</a></li>


<li class="toctree-l1"><a class="reference internal" href="plot_lines.html">Plotting lines in matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="subplots.html">Subplots and axes in matplotlib</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/numpy_intro.Rmd" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.Rmd</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introduction to Numpy</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-example-data">Some example data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-task">The task</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays-have-a-shape">Arrays have a shape</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays-have-a-datatype">Arrays have a datatype</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-new-arrays">Making new arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-without-using-the-mathematics-of-arrays">Calculating without using the mathematics of arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#array-mathematics">Array mathematics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-reaction-times">Processing reaction times</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="introduction-to-numpy">
<h1>Introduction to Numpy<a class="headerlink" href="#introduction-to-numpy" title="Permalink to this heading">#</a></h1>
<p>Numpy is the fundamental package for creating and manipulating <em>arrays</em> in
Python.</p>
<p>As for all Python libraries, we need to load the library into Python, in order to use it.  We use the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement to do that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> is now a <em>module</em> available for use.  A module is Python’s term for a library of code and / or data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show what &#39;numpy&#39; is</span>
<span class="n">numpy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;module &#39;numpy&#39; from &#39;/opt/hostedtoolcache/Python/3.10.12/x64/lib/python3.10/site-packages/numpy/__init__.py&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>Numpy is now ready to use, and has the name <code class="docutils literal notranslate"><span class="pre">numpy</span></code>.  For example, if we want to see the value of pi, according to Numpy, we could run this code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">pi</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.141592653589793
</pre></div>
</div>
</div>
</div>
<p>Although it is perfectly reasonable to import Numpy with the simplest statement above, in practice, nearly everyone imports Numpy like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make numpy available, but give it the name &quot;np&quot;.</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<p>All this is, is a version of the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement where we <em>rename</em> the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> module to <code class="docutils literal notranslate"><span class="pre">np</span></code>.</p>
<p>Now, instead of using the longer <code class="docutils literal notranslate"><span class="pre">numpy</span></code> as the name for the module, we can use <code class="docutils literal notranslate"><span class="pre">np</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show what &#39;np&#39; is</span>
<span class="n">np</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;module &#39;numpy&#39; from &#39;/opt/hostedtoolcache/Python/3.10.12/x64/lib/python3.10/site-packages/numpy/__init__.py&#39;&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.141592653589793
</pre></div>
</div>
</div>
</div>
<p>You will see that we nearly always use that <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code> form, and you
will also see that almost everyone else in the Python world does the same
thing.  It’s near-universal convention.  That way, everyone knows you mean
<code class="docutils literal notranslate"><span class="pre">numpy</span></code> when you use <code class="docutils literal notranslate"><span class="pre">np</span></code>.</p>
<section id="some-example-data">
<h2>Some example data<a class="headerlink" href="#some-example-data" title="Permalink to this heading">#</a></h2>
<p>Let’s start with some data, and then go on to process these data with arrays.</p>
<p>We fetch the text file we will be working on:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nipraxis</span>

<span class="c1"># Fetch the file.</span>
<span class="n">stim_fname</span> <span class="o">=</span> <span class="n">nipraxis</span><span class="o">.</span><span class="n">fetch_file</span><span class="p">(</span><span class="s1">&#39;24719.f3_beh_CHYM.csv&#39;</span><span class="p">)</span>
<span class="c1"># Show the filename.</span>
<span class="n">stim_fname</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/home/runner/.cache/nipraxis/0.5/24719.f3_beh_CHYM.csv&#39;
</pre></div>
</div>
</div>
</div>
<p>The file is the output from some experimental delivery software that recorded
various aspects of the presented stimuli and the subject’s responses.</p>
<p>The subject saw stimuli every 1.75 seconds or so.  Sometimes they press a
spacebar in response to the stimulus. The file records the subject’s data.
There is one row per trial, where each row records:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">response</span></code> — what response the subject make for this trial (‘None’ or
‘spacebar’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">response_time</span></code> — the reaction time for their response (milliseconds after
the stimulus, 0 if no response)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trial_ISI</span></code> — the time between the <em>previous</em> stimulus and this one (the
Interstimulus Interval).  For the first stimulus this is the time from the
start of the experimental software.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trial_shape</span></code> — the name of the stimulus (‘red_star’, ‘red_circle’ and so
on).</p></li>
</ul>
<p>Our task here is to take the values in this file and generate a sequence of times that record the <em>stimulus onset times</em>, in terms of the <em>number of scans</em> since the scanner run started.  More on this below.</p>
<p>Here we open the file as text, and load the lines of the file into memory as a
list.  See the <a class="reference internal" href="pathlib.html"><span class="doc std std-doc">pathlib page</span></a> for more details on how this works.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load text from the file.</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">text</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">stim_fname</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

<span class="c1"># Show the first 5 lines of the file text.</span>
<span class="n">text</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;response,response_time,trial_ISI,trial_shape&#39;,
 &#39;None,0,2000,red_star&#39;,
 &#39;None,0,1000,red_circle&#39;,
 &#39;None,0,2500,green_triangle&#39;,
 &#39;None,0,1500,yellow_square&#39;]
</pre></div>
</div>
</div>
</div>
<p>There is a very powerful library in Python for reading these
comma-seperated-values (CSV) files, called <a class="reference external" href="https://pandas.pydata.org">Pandas</a>.
We won’t go into the details here, but we use the library to read the file
above as something called a Pandas Dataframe — something like an Excel
spreadsheet in Python, with rows and columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the Pandas module, rename as &quot;pd&quot;</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Read the data file into a data frame.</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">stim_fname</span><span class="p">)</span>
<span class="c1"># Show the result</span>
<span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>response</th>
      <th>response_time</th>
      <th>trial_ISI</th>
      <th>trial_shape</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>0</td>
      <td>2000</td>
      <td>red_star</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>0</td>
      <td>1000</td>
      <td>red_circle</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>0</td>
      <td>2500</td>
      <td>green_triangle</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>0</td>
      <td>1500</td>
      <td>yellow_square</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>0</td>
      <td>1500</td>
      <td>blue_circle</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>315</th>
      <td>space</td>
      <td>294</td>
      <td>1000</td>
      <td>red_square</td>
    </tr>
    <tr>
      <th>316</th>
      <td>NaN</td>
      <td>0</td>
      <td>2500</td>
      <td>green_circle</td>
    </tr>
    <tr>
      <th>317</th>
      <td>NaN</td>
      <td>0</td>
      <td>1000</td>
      <td>green_star</td>
    </tr>
    <tr>
      <th>318</th>
      <td>space</td>
      <td>471</td>
      <td>1000</td>
      <td>red_circle</td>
    </tr>
    <tr>
      <th>319</th>
      <td>NaN</td>
      <td>0</td>
      <td>1000</td>
      <td>blue_circle</td>
    </tr>
  </tbody>
</table>
<p>320 rows × 4 columns</p>
</div></div></div>
</div>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">len</span></code> function on Pandas data frames, and this will give us the number of rows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_trials</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">n_trials</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>320
</pre></div>
</div>
</div>
</div>
</section>
<section id="the-task">
<h2>The task<a class="headerlink" href="#the-task" title="Permalink to this heading">#</a></h2>
<p>Now we can give some more detail of what we need to do.</p>
<ul class="simple">
<li><p>All the times in this file are from the experimental software.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">trial_ISI</span></code> values are times <em>between</em> the stimuli.  Thus the first
stimulus occurred 2000 ms after the experimental software started, and the second stimulus occurred 2000 + 1000 = 3000 ms after the experimental software started.</p></li>
<li><p>We will need the time that each trial started, in terms of milliseconds after
the start of the experimental software. We get these times by adding the current and all previous <code class="docutils literal notranslate"><span class="pre">trial_ISI</span></code> values, as above.  Call these values <code class="docutils literal notranslate"><span class="pre">exp_onsets</span></code>.  The first two values will be 2000 and 3000 as above.</p></li>
<li><p>The scanner started 4 seconds (4000ms) <em>before</em> the experimental software.
So the onset times in relation to the <em>scanner start</em> are 4000 + 2000 = 6000,
4000 + 2000 + 1000 = 7000ms.  Call these the <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code>.  We get the
<code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code> by adding 4000 to the corresponding <code class="docutils literal notranslate"><span class="pre">exp_onsets</span></code>.</p></li>
<li><p>Finally, the scanner starts a new scan each 2 second (2000 ms).  To get the
times in terms of scans we divide each of the <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code> by 2000.  Call
these the <code class="docutils literal notranslate"><span class="pre">onsets_in_scans</span></code> These are the times we need for our later
statistical modeling.</p></li>
</ul>
<p>Here then the values for <code class="docutils literal notranslate"><span class="pre">exp_onsets</span></code>, <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code> and <code class="docutils literal notranslate"><span class="pre">onsets_in_scans</span></code> for the first four trials:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Trial no</p></th>
<th class="head"><p>trial_ISI</p></th>
<th class="head"><p>exp_onsets (cumulative)</p></th>
<th class="head"><p>scanner_onsets (+4000)</p></th>
<th class="head"><p>onsets_in_scans (/2000)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>2000</p></td>
<td><p>2000</p></td>
<td><p>6000</p></td>
<td><p>3.0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1000</p></td>
<td><p>3000</p></td>
<td><p>7000</p></td>
<td><p>3.5</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>2500</p></td>
<td><p>5500</p></td>
<td><p>9500</p></td>
<td><p>4.75</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>1500</p></td>
<td><p>7000</p></td>
<td><p>11000</p></td>
<td><p>5.5</p></td>
</tr>
</tbody>
</table>
<p>Here is a calculation for the first four values for <code class="docutils literal notranslate"><span class="pre">exp_onsets</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_4_trial_isis</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2500</span><span class="p">,</span> <span class="mi">1500</span><span class="p">]</span>
<span class="c1"># First four values of exp_onsets</span>
<span class="n">first_4_exp_onsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                      <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                      <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                      <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                      <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                      <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">first_4_trial_isis</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
<span class="n">first_4_exp_onsets</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2000, 3000, 5500, 7000]
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code> are just these values + 4000:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First four values of scanner_onsets</span>
<span class="n">first_4_scanner_onsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_4_exp_onsets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">4000</span><span class="p">,</span>
                          <span class="n">first_4_exp_onsets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">4000</span><span class="p">,</span>
                          <span class="n">first_4_exp_onsets</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">4000</span><span class="p">,</span>
                          <span class="n">first_4_exp_onsets</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">4000</span><span class="p">]</span>
<span class="n">first_4_scanner_onsets</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[6000, 7000, 9500, 11000]
</pre></div>
</div>
</div>
</div>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">onsets_in_scans</span></code> values will start:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_4_onsets_in_scans</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_4_scanner_onsets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2000</span><span class="p">,</span>
                           <span class="n">first_4_scanner_onsets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2000</span><span class="p">,</span>
                           <span class="n">first_4_scanner_onsets</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2000</span><span class="p">,</span>
                           <span class="n">first_4_scanner_onsets</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2000</span><span class="p">]</span>
<span class="n">first_4_onsets_in_scans</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3.0, 3.5, 4.75, 5.5]
</pre></div>
</div>
</div>
</div>
<p>All this is ugly to type out — we surely want to the computer to do this calculation for us.</p>
<p>Luckily Pandas has already read in the data, so we can get all the <code class="docutils literal notranslate"><span class="pre">trial_ISI</span></code> values as a list of 320 values, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert the column of data into a list with 320 elements.</span>
<span class="n">trial_isis_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;trial_ISI&#39;</span><span class="p">])</span>
<span class="c1"># Show the first 15 values.</span>
<span class="n">trial_isis_list</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2000,
 1000,
 2500,
 1500,
 1500,
 2000,
 2500,
 1500,
 2000,
 1000,
 1000,
 1500,
 1500,
 2000,
 1500]
</pre></div>
</div>
</div>
</div>
<p>Notice that we used the <code class="docutils literal notranslate"><span class="pre">list</span></code> function to convert the 320 values in the Pandas column into a list with 320 values.</p>
<p>We could also have converted these 320 values into an <em>array</em> with 320 values, by using the <code class="docutils literal notranslate"><span class="pre">np.array</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert the column of data into an array with 320 elements.</span>
<span class="n">trial_isis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;trial_ISI&#39;</span><span class="p">])</span>
<span class="c1"># Show the first 15 values.</span>
<span class="n">trial_isis</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([2000, 1000, 2500, 1500, 1500, 2000, 2500, 1500, 2000, 1000, 1000,
       1500, 1500, 2000, 1500])
</pre></div>
</div>
</div>
</div>
<p>Notice that we can index into arrays in the same way we can index into lists.
Here we get the first value in the array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2000
</pre></div>
</div>
</div>
</div>
<p>We can also set values by putting the indexing on the right hand side:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4000</span>
</pre></div>
</div>
</div>
</div>
<p>Actually, let’s set that back to what it was before:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trial_isis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2000</span>
</pre></div>
</div>
</div>
</div>
<p>You’ve seen above that we can get the first 15 values with <em>slicing</em>, using the
colon <code class="docutils literal notranslate"><span class="pre">:</span></code> syntax, as in:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trial_isis</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([2000, 1000, 2500, 1500, 1500, 2000, 2500, 1500, 2000, 1000, 1000,
       1500, 1500, 2000, 1500])
</pre></div>
</div>
</div>
</div>
<p>— meaning, get all values starting at (implicitly) position 0, and going up to,
but not including, position 15.</p>
</section>
<section id="arrays-have-a-shape">
<h2>Arrays have a shape<a class="headerlink" href="#arrays-have-a-shape" title="Permalink to this heading">#</a></h2>
<p>The new array object has <code class="docutils literal notranslate"><span class="pre">shape</span></code> data attached to it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trial_isis</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(320,)
</pre></div>
</div>
</div>
</div>
<p>The shape gives the number of <em>dimensions</em>, and the number of elements for each
dimension.  We only have a one-dimensional array, so we see one number, which
is the number of elements in the array.  We will get on to two-dimensional
arrays later.</p>
<p>Notice that the shape is a <a class="reference internal" href="brisk_python.html#tuples"><span class="std std-ref">tuple</span></a>.  A tuple a type of sequence,
like a list.  See the link for details.  In this case, of a 1D array, the shape
is a <a class="reference internal" href="length_one_tuples.html"><span class="doc std std-doc">single element tuple</span></a>.</p>
</section>
<section id="arrays-have-a-datatype">
<h2>Arrays have a datatype<a class="headerlink" href="#arrays-have-a-datatype" title="Permalink to this heading">#</a></h2>
<p>An array differs from a list, in that each element of a list can be any data
type, whereas all elements in an array have to be the same datatype.</p>
<p>Here is the data type for all the values in our array, given by the <code class="docutils literal notranslate"><span class="pre">dtype</span></code>
(Data TYPE) attribute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trial_isis</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dtype(&#39;int64&#39;)
</pre></div>
</div>
</div>
</div>
<p>This tells us that all the values in the array are floating point values, so of
type <code class="docutils literal notranslate"><span class="pre">float64</span></code> — the standard type of floating point value for Numpy and most
other numerical packages (such as Matlab and R).   The array <code class="docutils literal notranslate"><span class="pre">dtype</span></code> attribute
specifies what type of elements the array does and can contain.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype of the array means that you cannot put data into this array
that cannot be made trivially into a floating point value:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isi_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;some text&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">22</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">isi_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;some text&#39;</span>

<span class="ne">NameError</span>: name &#39;isi_arr&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>This is in contrast to a list, where the elements can be a mixture of any type
of Python value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10.1</span><span class="p">,</span> <span class="mf">15.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;some_text&#39;</span>
<span class="n">my_list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[10.1, &#39;some_text&#39;, 0.5]
</pre></div>
</div>
</div>
</div>
</section>
<section id="making-new-arrays">
<h2>Making new arrays<a class="headerlink" href="#making-new-arrays" title="Permalink to this heading">#</a></h2>
<p>You have already seen how we can make an array from a sequence of values, using
the <code class="docutils literal notranslate"><span class="pre">np.array</span></code> function.  For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert a list into an array.</span>
<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="n">my_array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;10.1&#39;, &#39;some_text&#39;, &#39;0.5&#39;], dtype=&#39;&lt;U32&#39;)
</pre></div>
</div>
</div>
</div>
<p>Numpy has various functions for making arrays.  One very common way of making
new arrays is the <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code> function.  This makes arrays containing all zero
values of the shape we pass to the function.  For example, to make an array of
10 zeros, we could write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># An array containing 10 zeros.</span>
<span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])
</pre></div>
</div>
</div>
</div>
</section>
<section id="calculating-without-using-the-mathematics-of-arrays">
<h2>Calculating without using the mathematics of arrays<a class="headerlink" href="#calculating-without-using-the-mathematics-of-arrays" title="Permalink to this heading">#</a></h2>
<p>Another feature of arrays is that they are are very concise and efficient for
doing operations on the whole array, using <em>array mathematics</em>.</p>
<p>To show how this works, let’s start off by doing calculations we need <em>without</em> using the special features of <em>array mathematics</em>.</p>
<p>For example, we could use a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop and some pre-built arrays to do the
calculations for us.   It would look like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Arrays to hold the calculated values.</span>
<span class="n">exp_onsets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n_trials</span><span class="p">)</span>
<span class="n">scanner_onsets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n_trials</span><span class="p">)</span>
<span class="n">onsets_in_scans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n_trials</span><span class="p">)</span>
<span class="c1"># For each number from 0 up to (not including) the value of n_trials.</span>
<span class="n">time_running_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_trials</span><span class="p">):</span>
    <span class="n">time_running_total</span> <span class="o">=</span> <span class="n">time_running_total</span> <span class="o">+</span> <span class="n">trial_isis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">exp_onsets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_running_total</span>
    <span class="n">scanner_onsets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_onsets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">4000</span>
    <span class="n">onsets_in_scans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">scanner_onsets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2000</span>

<span class="c1"># Show the first 15 onsets in scans</span>
<span class="n">onsets_in_scans</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 3.  ,  3.5 ,  4.75,  5.5 ,  6.25,  7.25,  8.5 ,  9.25, 10.25,
       10.75, 11.25, 12.  , 12.75, 13.75, 14.5 ])
</pre></div>
</div>
</div>
</div>
<p>That calculation looks right, comparing to our by-hand calculation above.</p>
</section>
<section id="array-mathematics">
<h2>Array mathematics<a class="headerlink" href="#array-mathematics" title="Permalink to this heading">#</a></h2>
<p>Above you see the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop way.  Arrays allow us to express the same calculation in a much more efficient way.  It is more efficient in the sense that we type less code, the code is usually easier to read, and the operations are much more efficient for the computer, because the computer can take advantage of the fact that it knows that all the values are of the same type.</p>
<p>One way that arrays can be more efficient, is when we have a pre-built,
highly-optimized function to do the work for us. In our case, to calculate
<code class="docutils literal notranslate"><span class="pre">exp_onsets</span></code>, Numpy has a useful function called <code class="docutils literal notranslate"><span class="pre">np.cumsum</span></code> that does the
cumulative sum of the elements in the array.  As you can see, this does exactly
what we want here:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the cumulative sum</span>
<span class="n">exp_onsets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">trial_isis</span><span class="p">)</span>
<span class="c1"># Show the first 15 values</span>
<span class="n">exp_onsets</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 2000,  3000,  5500,  7000,  8500, 10500, 13000, 14500, 16500,
       17500, 18500, 20000, 21500, 23500, 25000])
</pre></div>
</div>
</div>
</div>
<p>Next we need to make these experiment times into times in terms of the scanner
start.  We decided to call these the <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code>. To do this, we need to
add 4000 to every time.   Above we did this in a step in the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop. But,
Numpy can do the same calculation more efficiently, because when we ask Numpy
to add a single number to an array, it has the effect of adding that number to
<em>every element</em> in the array. That means we can calculate the <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code> in one line:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scanner_onsets</span> <span class="o">=</span> <span class="n">exp_onsets</span> <span class="o">+</span> <span class="mi">4000</span>
<span class="n">scanner_onsets</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 6000,  7000,  9500, 11000, 12500, 14500, 17000, 18500, 20500,
       21500, 22500, 24000, 25500, 27500, 29000])
</pre></div>
</div>
</div>
</div>
<p>Next we need to divide each <code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code> value by 2000 to give the
<code class="docutils literal notranslate"><span class="pre">onsets_in_scan</span></code>. Luckily — Numpy does division in the same way as it does
addition; dividing a single number into an array causes the number to be divided into each element:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">onsets_in_scans</span> <span class="o">=</span> <span class="n">scanner_onsets</span> <span class="o">/</span> <span class="mi">2000</span>
<span class="n">onsets_in_scans</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 3.  ,  3.5 ,  4.75,  5.5 ,  6.25,  7.25,  8.5 ,  9.25, 10.25,
       10.75, 11.25, 12.  , 12.75, 13.75, 14.5 ])
</pre></div>
</div>
</div>
</div>
</section>
<section id="processing-reaction-times">
<h2>Processing reaction times<a class="headerlink" href="#processing-reaction-times" title="Permalink to this heading">#</a></h2>
<p>OK — we have the stimulus onset times, but what about the times for the
<em>responses</em>?</p>
<p>We make the <code class="docutils literal notranslate"><span class="pre">response_time</span></code> values into an array in the familiar way:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;response_time&#39;</span><span class="p">])</span>
<span class="c1"># Show the first 15 values.</span>
<span class="n">response_times</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([  0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 427,   0,   0,
       369,   0])
</pre></div>
</div>
</div>
</div>
<p>Notice that there is a <code class="docutils literal notranslate"><span class="pre">response_time</span></code> of 0 when there was no response.  We’ll
pretend we haven’t noticed that, for now.</p>
<p>Now we want to calculate the <code class="docutils literal notranslate"><span class="pre">scanner_reponse_onsets</span></code>.  These are the <em>response
times</em> in terms of the start of the scanner.  We already have the times of the
trials onsets in terms of the scanner:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scanner_onsets</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 6000,  7000,  9500, 11000, 12500, 14500, 17000, 18500, 20500,
       21500, 22500, 24000, 25500, 27500, 29000])
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">scanner_response_onsets</span></code> are just the trial onset times in terms of the
scanner start (<code class="docutils literal notranslate"><span class="pre">scanner_onsets</span></code>), plus the corresponding reaction times.  Of
course we could do this with a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scanner_response_onsets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n_trials</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_trials</span><span class="p">):</span>
    <span class="n">scanner_response_onsets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">scanner_onsets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">response_times</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">scanner_response_onsets</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 6000.,  7000.,  9500., 11000., 12500., 14500., 17000., 18500.,
       20500., 21500., 22927., 24000., 25500., 27869., 29000.])
</pre></div>
</div>
</div>
</div>
<p>Luckily though, Numpy knows what to do when we add two arrays with the same
shape.  It takes each element in the first array and adds the corresponding
element in the second array - just like the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop above.</p>
<p>This is call <em>elementwise</em> addition, because it does the addition (or
subtraction or division …) <em>element</em> by <em>element</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Same result from adding the two arrays with the same shape.</span>
<span class="n">scanner_response_onsets</span> <span class="o">=</span> <span class="n">scanner_onsets</span> <span class="o">+</span> <span class="n">response_times</span>
<span class="n">scanner_response_onsets</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 6000,  7000,  9500, 11000, 12500, 14500, 17000, 18500, 20500,
       21500, 22927, 24000, 25500, 27869, 29000])
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="what_is_an_image.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">What is an image?</p>
      </div>
    </a>
    <a class="right-next"
       href="boolean_arrays.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Boolean arrays</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-example-data">Some example data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-task">The task</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays-have-a-shape">Arrays have a shape</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays-have-a-datatype">Arrays have a datatype</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-new-arrays">Making new arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-without-using-the-mathematics-of-arrays">Calculating without using the mathematics of arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#array-mathematics">Array mathematics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-reaction-times">Processing reaction times</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The nipraxis team
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>